# Models Context

이 폴더는 SQLAlchemy ORM 모델(DB 테이블 정의)을 포함합니다.

## 테이블 관계도

```
users (1) ──── (N) user_sessions (N) ──── (1) sessions
  │
  ├── (1) ──── (N) team_members (N) ──── (1) teams
  │                     └── (N) ──── (1) sessions
  │
  ├── (1) ──── (N) reservations
  │                     └── (1) ──── (N) reservation_participants
  │
  ├── (1) ──── (N) reservation_participants
  │
  └── (1) ──── (N) notices
```

## 테이블 상세

### users
| 컬럼 | 타입 | 설명 |
|------|------|------|
| user_id | BigInteger PK | 유저 ID |
| kakao_id | BigInteger UNIQUE | 카카오 고유 ID |
| nickname | String | 닉네임 |
| kakao_profile_image_url | Text | 프로필 이미지 |
| affiliation | String | 소속 |
| role | String | 역할 (root/admin/member) |
| created_at, updated_at | DateTime | 생성/수정 시간 |

### sessions
| 컬럼 | 타입 | 설명 |
|------|------|------|
| session_id | BigInteger PK | 세션 ID |
| name | String UNIQUE | 악기/파트명 |
| created_at | DateTime | 생성 시간 |

### user_sessions
| 컬럼 | 타입 | 설명 |
|------|------|------|
| user_session_id | BigInteger PK | PK |
| user_id | FK → users | 유저 |
| session_id | FK → sessions | 세션 |
| is_main | Boolean | 주 악기 여부 |
| skill_level | Numeric(4,2) | 숙련도 (0~10) |
| UNIQUE | (user_id, session_id) | 중복 방지 |

### reservations
| 컬럼 | 타입 | 설명 |
|------|------|------|
| reservation_id | BigInteger PK | 예약 ID |
| created_by | FK → users | 생성자 |
| title | String | 제목 |
| reservation_date | Date | 예약 날짜 |
| start_time, end_time | Time | 시작/종료 시간 |
| location | Text | 장소 |
| description | Text | 설명 |
| status | String | 상태 (open/closed) |
| max_participants | Integer | 최대 참여 인원 |

### reservation_participants
| 컬럼 | 타입 | 설명 |
|------|------|------|
| participant_id | BigInteger PK | PK |
| reservation_id | FK → reservations | 예약 |
| user_id | FK → users | 참여자 |
| status | String | 상태 (confirmed/pending) |
| UNIQUE | (reservation_id, user_id) | 중복 참여 방지 |

### teams
| 컬럼 | 타입 | 설명 |
|------|------|------|
| team_id | BigInteger PK | 팀 ID |
| name | String | 팀명 |
| description | Text | 설명 |
| created_at | DateTime | 생성 시간 |

### team_members
| 컬럼 | 타입 | 설명 |
|------|------|------|
| team_member_id | BigInteger PK | PK |
| team_id | FK → teams | 팀 |
| user_id | FK → users | 멤버 |
| session_id | FK → sessions | 담당 세션 |
| UNIQUE | (team_id, user_id) | 중복 가입 방지 |

### notices
| 컬럼 | 타입 | 설명 |
|------|------|------|
| notice_id | BigInteger PK | 공지 ID |
| author_id | FK → users | 작성자 |
| title | String | 제목 |
| content | Text | 내용 |
| created_at, updated_at | DateTime | 생성/수정 시간 |
